<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Easy home lab setup guide | 0x-s0M3n4th's Blog</title><meta name=keywords content><meta name=description content="A quick guide to setting up a virtualized pentest environment using minimal resources."><meta name=author content="0x-s0M3n4th"><link rel=canonical href=https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/01-easy-to-setup-lab/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://0x-s0M3n4th.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://0x-s0M3n4th.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://0x-s0M3n4th.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://0x-s0M3n4th.github.io/apple-touch-icon.png><link rel=mask-icon href=https://0x-s0M3n4th.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/01-easy-to-setup-lab/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/01-easy-to-setup-lab/"><meta property="og:site_name" content="0x-s0M3n4th's Blog"><meta property="og:title" content="Easy home lab setup guide"><meta property="og:description" content="A quick guide to setting up a virtualized pentest environment using minimal resources."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="notes"><meta property="article:published_time" content="2025-11-24T13:25:00+05:30"><meta property="article:modified_time" content="2025-11-24T13:25:00+05:30"><meta property="og:image" content="https://0x-s0M3n4th.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://0x-s0M3n4th.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Easy home lab setup guide"><meta name=twitter:description content="A quick guide to setting up a virtualized pentest environment using minimal resources."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://0x-s0M3n4th.github.io/notes/"},{"@type":"ListItem","position":2,"name":"Network Penetration Testing","item":"https://0x-s0M3n4th.github.io/notes/pen-testing-notes/"},{"@type":"ListItem","position":4,"name":"Lab setup and environment","item":"https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/"},{"@type":"ListItem","position":5,"name":"Easy home lab setup guide","item":"https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/01-easy-to-setup-lab/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Easy home lab setup guide","name":"Easy home lab setup guide","description":"A quick guide to setting up a virtualized pentest environment using minimal resources.","keywords":[],"articleBody":"Requirements: Kali linux Vmware workstation pro Windows 10 workstation windows server 2022 Metasploitable Linux 2 Linux mint(optional) You should have basic knowledge of setting up vms inside vmware, plus feel free to ommit any machine as your system needs. Vmware workstation pro: Install by signing up from this site VMWARE Kali linux: Install kali linux from this site KALI Linux Note Install prebuilt vm images for vmware\nLinux mint(optional): We will be using this distro for setting up basic blue team operations regarding detection of the attacks. It’s an optional setup. If you have limited resources skip this. Install linux mint from this site LINUX MINT , install the xfce edition for lightweight usage. Metasploitable-2-linux: Install from this site Metasploitable-2-linux windows 10 enterprise iso: Install from this site Win 10 (link not working), i will provide a drive link later on ;)) You can use any windows workstation for testing!! Windows server 2022 iso: Install from this site WINDOWS SERVER 2022 You can use any windows server for testing. Network segmentation inside vmware: We will be making 5 different folders for our homelab inside vmware. First one which will be ATTACK-BOX: inside this kali linux will be present. Second one will be PENTEST-NET: inside this metasploitable-2-linux will be present. Third one will be PIVOT-NET: inside this 2 windows 10 workstations(name them THEPUNISHER, SPIDERMAN) will be present. Fourth one will be SECURE-NET: inside this windows server 2022 will be present. Fifth one will be DETECTION-NET: inside this our linux mint machine will be present. You can make the folders by right clicking onto the empty space on vmware -\u003e by selecting New folder option. Now after making and separating the machines, we need to segment the network. To do so follow the next steps: Open vmware -\u003e click on Edit -\u003e then virtual network editor You should see two network named NAT and another would be your host only connection. We will add 2 more subnets click on change settings -\u003e click on Add network -\u003e select your preferred vmnet and click add After adding we need to change some subnet settings on the left down corner. Follow the screenshots to give the same as mine: Important If you don’t want to segment the network and make the lab with only NAT network, you can do so, for simpler setup use NAT(if inexperienced). For this whole Network pentesting guide i am going to use kali on 3 of the vmnets for ease of the audience.\nNow click on Apply Then come to vmware -\u003e click on kali linux -\u003e edit virtual machine -\u003e add 2 extra network adapters by clicking on the add button and selecting Network adapter. After that add your kali machine into vmnet2 , vmnet3 (according to my subnet naming) Then come to your Linux mint machine do the same as kali Add your metasploitable 2 linux machine into vmnet2 only. For the NAT only setup you will add metasploitable 2 in NAT . Network segmentation summary: All devices in NAT: Just normal default importing of all the vms in vmware. Kali is on NAT, vmnet2 and vmnet3, used linux mint as a router for pivoting through machines inside the network segment so that all of the workstations under the forest can talk to each other: Later on for advanced level pivoting i will show how we can make the following type of network, where kali will be only on NAT with some added changes: Feel free to use any of the architecture, but i would suggest you to make the first one for easy setup and rapid exploitation wihtout network failures plus less resources consumed. If you want to actually feel like more of a real world scenario use the second one.\nNote I will be using the second one for this whole Network pentesting tutorial.For some practicals i have added new vulnerable machines which i will be providing later on throughout the course. Sometimes i have also used a different Domain controller like windows server 2019 for demo purposes, you can do all these works inside your own DC which we will be setting up.\nActive Directory LAB setup: We will first setup the Domain controller Setting up the Domain controller: Come to your windows server 2022 -\u003e Add it into vmnet3 along with NAT in case of internet related tasks like installations. Boot your windows server -\u003e make sure you are at this stage: Click on next -\u003e Install Now You should see a page like this : Click on windows server 2022 standard evaluation(Desktop Experience) -\u003e then hit next Check the box -\u003e hit next Once you are at this page: Click on custom install Then on this page hit New -\u003e Apply Hit ok on the warning Click next again on this page: Now let it install. After that you will come to this page: Give the password P@$$w0rd! Now login using the creds. Install vmware tools -\u003e click vm -\u003e Install vmware tools -\u003e open cmd -\u003e run the command D:\\setup.exe -\u003e After installing a complete vmware tools using the popped up wizard -\u003e restart Now we need to rename our windows server -\u003e press on the windows button -\u003e type name -\u003e Then click on this option: After that click on Rename PC We will be building this Lab as a MARVEL theme, so i gave the name HYDRA-DC -\u003e then restart again. Login again Now we will actually start setting our windows server as Domain controller. Onto server manager -\u003e Click on the Manage button -\u003e Click Add roles and features A wizard will pop up, click 3 times next. On selection of Server Roles , select Active Directory Domain Services . This will allow us to have our domain. Hit Add features on the next pop up. Then click 3 times next again on the options given. After coming to this page Check this option: Then hit install . After installation click on this option: A new wizard will pop up, click on these options, and give this domain name{you can give your unique domain name, but make sure you have added .local at the end of the name}: Hit next -\u003e Give the same admin password into this page also: Hit next 2 times including the previous step. Populated the NetBIOS domain name successfully: Hit next again. Our pathways: What is SYSVOL: SYSVOL is a shared folder on each domain controller (DC) in a Windows Server Active Directory (AD) domain that stores critical files for common access and replication across the domain. It contains a copy of Group Policy Objects (GPOs) and scripts, such as logon and startup scripts, which are essential for applying policies to member computers\nWhat is NTDS: NTDS, or NT Directory Services, is the underlying technology and database that powers Microsoft’s Active Directory (AD). It is responsible for storing and managing all the information about network resources, such as user accounts, computer objects, groups, and security identifiers (SIDs). The physical database file is named ntds.dit (Directory Information Tree) and is stored by default in the %SystemRoot%\\NTDS folder on every domain controller.\nHit next again 2 times including this pathways page. You should see a prerequisite check running, and after some time it should say successful -\u003e then hit install Then on installation it should give a pop up like this -\u003e click close You DC will be automatically restarted and bring you to the login screen. Login . We will now install another feature called ADCS(active direcotry Certificate Services) , this allows us to use LDAPS on our DC , and manages certificates for authentication purposes. Again on server manager -\u003e click manage -\u003e add roles and features -\u003e 3 times next -\u003e Select ADCS -\u003e add features -\u003e 4 times next -\u003e Check the restart box -\u003e hit install Then after installation -\u003e click on this option: Hit next on the first option. Check the box of Certificate auhority and hit next Hit 5 times next again -\u003e change the validity option to 99 years Hit next and come to this page then click configure Restart again after the completion. Setting up the windows 10 machines: Boot up both the windows 10 machine now, i removed previous machines containing windows 10 enterprise iso .This time i am having normal windows 10 iso , so we will be using windows 10 education . Remember while adding the vm you gave username and password , in my case then only the following pages came up. Then setup the basic requirements on both the machines Use the option domain joined instead , rather than using online accounts. 4. Name THEPUNISHER vm’s user as frankcastle with password Password1 , and SPIDERMAN vm’s user as peterparker with password Password1 `` 5. Select the security questions and answer them as bob for every single one of them in both the machines. 6. Turn off all the privacy settings, we don’t want to send any data to Microsoft 7. Don’t accept crotana 8. After doing the complete setup , it will automatically boot up the machines, then rename these two machines as THEPUNISHER, SPIDERMAN respectively . Then restart again. Setting up GPO(Groups, Policies and Users): Open up the Domain controller\nOn server manager -\u003e Click on tools -\u003e Active Directory users and computers\nThis page should load up: Separating the groups from users: Give the name as Groups\nGrab all the groups from the users tab and move them to Groups except Administrator and Guest user. Making Domain admin:\nRight click on the Administrator user -\u003e Copy -\u003e Fill the following information Give the password as : Password12345! Click next and hit finish Making a service account which will be our another Domain admin :\nAgain copy from the Administrator account and use the following info: Give the password as MYpassword123# Then do this step: Making some low level users which will part of our Domain users group:\nUse the following steps to open the wizard: Add the frank castle user: Use the following checkboxes, and give the same password of frankcastle which is Password1 Add peterparker using the following steps: We will give here his password as Password2 All users: SETTING UP FILESHARE:\nCome to server manager -\u003e Click on Files and storage services Click on Shares -\u003e Tasks -\u003e New share -\u003e SMB share quick -\u003e click next -\u003e Click next again -\u003e give the share name as hackme -\u003e click 2 times next -\u003e hit create\nSetting up the service account(SQL Service):\nOpen command prompt as administrator use the following command: setspn -a HYDRA-DC/SQLService.MARVEL.local:60111 MARVEL\\SQLService 3. Verifying the changes using the following command by querying:\nsetspn -T MARVEL.local -Q */* At the end of the command’s output we should see this result: Setting up a group policy:\nOn the start menu type group Use the following options to create a new GPO: Give this name: Our motive is to disable the windows defender accross the whole domain , as we are not going to perform any modern defender evasion techniques. Use the following steps for editing the GPO: Come to this column: Find Microsoft Defender Antivirus -\u003e and double click on this turn off option: A wizard should pop up -\u003e click on enabled -\u003e apply -\u003e click ok Then again come back to the GPO management tab -\u003e right click -\u003e click enforced Then give the DC a static IP from the adapter settings, used linux mint as the DNS server: I have used linux mint as the gateway, if you are not using any intermediate os for acting as a router, don’t give any gateway(as no default gateway exists inside vmnet’s host only networks, in case if you are using the network segmentation). If you are using the NAT only setup give your NAT's default gateway. You can identify your NAT's default gateway through Virtual Network Editor -\u003e Change settings -\u003e select the NAT network -\u003e NAT settings.\nNote Don’t get fooled by my lab result’s IP addresses. Your lab will be having different setup of IPs as well as NICs. Understand those carefully and then add accordingly throughout the lab setup as well as on practical demos.\nSetting up Linux mint as an intermediate router(optional): For the advance lab setup\nSet up static IP for both wired connection 2 and 3 in linux mint: ENABLING IP FORWARDING:\n# Turn on forwarding immediately sudo sysctl -w net.ipv4.ip_forward=1 # Make it permanent (so it survives a reboot) echo \"net.ipv4.ip_forward=1\" | sudo tee -a /etc/sysctl.conf FIXING THE FIREWALL BY ALLOWING ROUTING: Allow traffic from vmnet2 to go to vmnet3: sudo ufw route allow in on ens34 out on ens35 Allow traffic from vmnet3 to go to vmnet2: sudo ufw route allow in on ens35 out on ens34 Joining the Machines to the Domain controller: Pointing those machines to our Domain controller: If you have followed the linux mint one this one is for you: Our motive is to point SPIDERMAN to route it’s traffic to linux mint to Domain controller and vise versa. To do so use the following settings in your vmnet 2 adapter on SPIDERMAN: Onto THEPUNISHER machine use the following settings for vmnet 2: Settings for vmnet 3 on THEPUNISHER machine: If you are doing the NAT only setup: Give the default gateway of your NAT network for both of the machine. Give the Domain controller's IP as DNS for both the machine. Testing the connections: Ping SPIDERMAN to Linux mint , then SPIDERMAN to THEPUNISHER Ping THEPUNISHER to linu mint and then to SPIDERMAN Ping Domain controller from Spiderman and THEPUNISHER machine both and vise versa. If you face request timeout issue, turn off windows firewall fully on both the PUNISHER and SPIDERMAN machine. Then try again. Joining the domain from THEPUNISHER machine: Click on the start button -\u003e type Domain and access this option: Click on connect -\u003e and click on join this device to a local AD domain Give your local domain name and hit next: If this windows loads up that’s mean your lab setup is successful: Give username as administrator and password as P@$$w0rd! Then on this pop up, select account type as Administrator Joining domain for SPIDERMAN machine: Do the exact same stuff we did for THEPUNISHER machine. Let those machines reboot, come to the DC -\u003e server manager -\u003e Active Directory users and computers -\u003e Under your local domain -\u003e select Computers . You should see your two Windows 10 workstations Now login onto both the workstations as MARVEL\\administrator using the DC's admin password which is P@$$w0rd! Now adding local admins inside THEPUNISHER machine: click on the start button -\u003e type users and go to the settings Edit local groups and users: or you can press win + r and type lusrmgr.msc Come to the users tab -\u003e right click on Administrator -\u003e then set a password -\u003e give this password Password1! Enable this account by double clicking it -\u003e and disabling the checkbox telling Account is disabled Adding fcastle which we made inside the DC inside THEPUNISHER machine’s Administrator groups: Click on Add -\u003e type fcastle -\u003e click on check names and this should appear: Hit apply and ok Then enable Network discovery by going into the network folder Adding local admins inside SPIDERMAN machine: Do the same steps as THEPUNISHER's step number 4 Then add 2 accounts into the administrators group using the following steps: Write pparker and click check names add fcastle the same way we did it inside THEPUNISHER Now peterparker and frankcastle both as local admins inside SPIDERMAN machine Enable network sharing by clicking the option click to change -\u003e turn on network discovery and file sharing Restart your computer and login as peterparker like this: Now we will map the network drive Follow these steps: Type \\\\HYDRA-DC\\hackme and check both the boxes: Use the domain admin credentials administrator and P@$$w0rd! Now we should access the shared drive: CONGRATS WE HAVE COMPLETED THE LAB SETUP !! Let’s start hacking.\n","wordCount":"2667","inLanguage":"en","image":"https://0x-s0M3n4th.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-11-24T13:25:00+05:30","dateModified":"2025-11-24T13:25:00+05:30","author":{"@type":"Person","name":"0x-s0M3n4th"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/01-easy-to-setup-lab/"},"publisher":{"@type":"Organization","name":"0x-s0M3n4th's Blog","logo":{"@type":"ImageObject","url":"https://0x-s0M3n4th.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://0x-s0M3n4th.github.io/ accesskey=h title="0x-s0M3n4th's Blog (Alt + H)"><img src=https://0x-s0M3n4th.github.io/apple-touch-icon.png alt aria-label=logo height=35>0x-s0M3n4th's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://0x-s0M3n4th.github.io/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://0x-s0M3n4th.github.io/table-of-contents/ title="Table of contents"><span>Table of contents</span></a></li><li><a href=https://0x-s0M3n4th.github.io/blogs/ title=Blogs><span>Blogs</span></a></li><li><a href=https://0x-s0M3n4th.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://0x-s0M3n4th.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://0x-s0M3n4th.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://0x-s0M3n4th.github.io/resume.pdf title=Resume><span>Resume</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://0x-s0M3n4th.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://0x-s0M3n4th.github.io/notes/>Notes</a>&nbsp;»&nbsp;<a href=https://0x-s0M3n4th.github.io/notes/pen-testing-notes/>Network Penetration Testing</a>&nbsp;»&nbsp;<a href=https://0x-s0M3n4th.github.io/notes/pen-testing-notes/network-pentesting/01-lab-build/>Lab setup and environment</a></div><h1 class="post-title entry-hint-parent">Easy home lab setup guide</h1><div class=post-description>A quick guide to setting up a virtualized pentest environment using minimal resources.</div><div class=post-meta><span title='2025-11-24 13:25:00 +0530 IST'>November 24, 2025</span>&nbsp;·&nbsp;<span>13 min</span>&nbsp;·&nbsp;<span>2667 words</span>&nbsp;·&nbsp;<span>0x-s0M3n4th</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#requirements>Requirements:</a><ul><li><a href=#vmware-workstation-pro>Vmware workstation pro:</a></li><li><a href=#kali-linux>Kali linux:</a></li><li><a href=#linux-mintoptional>Linux mint(optional):</a></li><li><a href=#metasploitable-2-linux>Metasploitable-2-linux:</a></li><li><a href=#windows-10-enterprise-iso>windows 10 enterprise iso:</a></li><li><a href=#windows-server-2022-iso>Windows server 2022 iso:</a></li></ul></li><li><a href=#network-segmentation-inside-vmware>Network segmentation inside vmware:</a><ul><li><a href=#network-segmentation-summary>Network segmentation summary:</a></li></ul></li><li><a href=#active-directory-lab-setup>Active Directory LAB setup:</a><ul><li><a href=#setting-up-the-domain-controller>Setting up the Domain controller:</a></li><li><a href=#setting-up-the-windows-10-machines>Setting up the windows 10 machines:</a></li><li><a href=#setting-up-gpogroups-policies-and-users>Setting up GPO(Groups, Policies and Users):</a></li><li><a href=#setting-up-linux-mint-as-an-intermediate-routeroptional>Setting up Linux mint as an intermediate router(optional):</a></li><li><a href=#joining-the-machines-to-the-domain-controller>Joining the Machines to the Domain controller:</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=requirements>Requirements:<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h2><ol><li>Kali linux</li><li>Vmware workstation pro</li><li>Windows 10 workstation</li><li>windows server 2022</li><li>Metasploitable Linux 2</li><li>Linux mint(optional)
<em>You should have basic knowledge of setting up vms inside vmware, plus feel free to ommit any machine as your system needs.</em></li></ol><hr><h3 id=vmware-workstation-pro>Vmware workstation pro:<a hidden class=anchor aria-hidden=true href=#vmware-workstation-pro>#</a></h3><ul><li>Install by signing up from this site <a href=https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion>VMWARE</a></li></ul><hr><h3 id=kali-linux>Kali linux:<a hidden class=anchor aria-hidden=true href=#kali-linux>#</a></h3><ul><li>Install kali linux from this site <a href=https://kali.org>KALI Linux</a></li></ul><link rel=stylesheet href=/css/vendors/admonitions.4fd9a0b8ec8899f2ca952048d255a569f433f77dfb3f52f5bc87e7d65cdce449.css integrity="sha256-T9mguOyImfLKlSBI0lWlafQz9337P1L1vIfn1lzc5Ek=" crossorigin=anonymous><div class="admonition note"><div class=admonition-header><svg viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7.0 64 0H224v128c0 17.7 14.3 32 32 32h128v125.7l-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3.0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9.0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6.0zM311.9 417 441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
<span>Note</span></div><div class=admonition-content><p>Install prebuilt vm images for vmware</p></div></div><hr><h3 id=linux-mintoptional>Linux mint(optional):<a hidden class=anchor aria-hidden=true href=#linux-mintoptional>#</a></h3><ul><li>We will be using this distro for setting up basic blue team operations regarding detection of the attacks. It&rsquo;s an optional setup. If you have limited resources skip this.</li><li>Install linux mint from this site <a href=https://linuxmint.com/download.php>LINUX MINT</a> , install the <code>xfce</code> edition for lightweight usage.</li></ul><hr><h3 id=metasploitable-2-linux>Metasploitable-2-linux:<a hidden class=anchor aria-hidden=true href=#metasploitable-2-linux>#</a></h3><ul><li>Install from this site <a href=https://sourceforge.net/projects/metasploitable/>Metasploitable-2-linux</a></li></ul><hr><h3 id=windows-10-enterprise-iso>windows 10 enterprise iso:<a hidden class=anchor aria-hidden=true href=#windows-10-enterprise-iso>#</a></h3><ul><li>Install from this site <a href=https://www.microsoft.com/en-us/software-download/windows10ISO>Win 10</a> (link not working), i will provide a drive link later on ;))
<em>You can use any windows workstation for testing!!</em></li></ul><hr><h3 id=windows-server-2022-iso>Windows server 2022 iso:<a hidden class=anchor aria-hidden=true href=#windows-server-2022-iso>#</a></h3><ul><li>Install from this site <a href=https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2022>WINDOWS SERVER 2022</a>
<em>You can use any windows server for testing.</em></li></ul><hr><h2 id=network-segmentation-inside-vmware>Network segmentation inside vmware:<a hidden class=anchor aria-hidden=true href=#network-segmentation-inside-vmware>#</a></h2><p><em>We will be making 5 different folders for our homelab inside vmware. First one which will be <code>ATTACK-BOX</code>: inside this <code>kali linux</code> will be present. Second one will be <code>PENTEST-NET</code>: inside this <code>metasploitable-2-linux</code> will be present. Third one will be <code>PIVOT-NET</code>: inside this 2 <code>windows 10 workstations(name them THEPUNISHER, SPIDERMAN)</code> will be present. Fourth one will be <code>SECURE-NET</code>: inside this <code>windows server 2022</code> will be present. Fifth one will be <code>DETECTION-NET</code>: inside this our <code>linux mint</code> machine will be present.</em>
<strong>You can make the folders by right clicking onto the empty space on vmware -> by selecting <code>New folder</code> option.</strong>
<img alt=ls_1 loading=lazy src=/images/Pentesting/NP/lab/ls_1.png></p><ul><li>Now after making and separating the machines, we need to segment the network.</li><li>To do so follow the next steps:<ul><li>Open <code>vmware</code> -> click on <code>Edit</code> -> then <code>virtual network editor</code></li><li>You should see two network named <code>NAT</code> and another would be your host only connection.</li><li>We will add 2 more subnets</li><li>click on <code>change settings</code> -> click on <code>Add network</code> -> select your preferred <code>vmnet</code> and click <code>add</code></li><li>After adding we need to change some subnet settings on the left down corner.</li><li>Follow the screenshots to give the same as mine:
<img alt=ls_2 loading=lazy src=/images/Pentesting/NP/lab/ls_2.png>
<img alt=ls_3 loading=lazy src=/images/Pentesting/NP/lab/ls_3.png></li></ul></li></ul><div class="admonition important"><div class=admonition-header><svg viewBox="0 0 512 512"><path d="M256 512A256 256 0 10256 0a256 256 0 100 512zm0-384c13.3.0 24 10.7 24 24v112c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1164 0 32 32 0 11-64 0z"/></svg>
<span>Important</span></div><div class=admonition-content><p>If you don&rsquo;t want to segment the network and make the lab with only NAT network, you can do so, for simpler setup use NAT(if inexperienced). For this whole Network pentesting guide i am going to use kali on 3 of the vmnets for ease of the audience.</p></div></div><ul><li>Now click on <code>Apply</code></li><li>Then come to <code>vmware</code> -> click on <code>kali linux</code> -> <code>edit virtual machine</code> -> add 2 extra <code>network adapters</code> by clicking on the <code>add</code> button and selecting <code>Network adapter</code>.</li><li>After that add your kali machine into <code>vmnet2</code> , <code>vmnet3</code> (according to my subnet naming)</li><li>Then come to your Linux mint machine do the same as <code>kali</code></li><li>Add your <code>metasploitable 2 linux</code> machine into <code>vmnet2</code> only.</li><li>For the <code>NAT</code> only setup you will add <code>metasploitable 2</code> in <code>NAT</code> .</li></ul><h3 id=network-segmentation-summary>Network segmentation summary:<a hidden class=anchor aria-hidden=true href=#network-segmentation-summary>#</a></h3><ol><li><em>All devices in NAT:</em> Just normal default importing of all the vms in vmware.
<img alt=ls_4 loading=lazy src=/images/Pentesting/NP/lab/ls_4.png></li><li><em>Kali is on NAT, vmnet2 and vmnet3, used linux mint as a router for pivoting through machines inside the network segment so that all of the workstations under the forest can talk to each other:</em>
<img alt=current_lab loading=lazy src=/images/Pentesting/NP/lab/current_lab.png></li></ol><p><strong>Later on for advanced level pivoting i will show how we can make the following type of network, where kali will be only on NAT with some added changes:</strong>
<img alt=ls_6 loading=lazy src=/images/Pentesting/NP/lab/ls_6.png>
<strong>Feel free to use any of the architecture, but i would suggest you to make the first one for easy setup and rapid exploitation wihtout network failures plus less resources consumed. If you want to actually feel like more of a real world scenario use the second one.</strong></p><div class="admonition note"><div class=admonition-header><svg viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7.0 64 0H224v128c0 17.7 14.3 32 32 32h128v125.7l-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3.0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9.0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6.0zM311.9 417 441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
<span>Note</span></div><div class=admonition-content><p>I will be using the second one for this whole Network pentesting tutorial.For some practicals i have added new vulnerable machines which i will be providing later on throughout the course. Sometimes i have also used a different <code>Domain controller like windows server 2019</code> for demo purposes, you can do all these works inside your own <code>DC</code> which we will be setting up.</p></div></div><hr><h2 id=active-directory-lab-setup>Active Directory LAB setup:<a hidden class=anchor aria-hidden=true href=#active-directory-lab-setup>#</a></h2><ol><li>We will first setup the Domain controller</li></ol><h3 id=setting-up-the-domain-controller>Setting up the Domain controller:<a hidden class=anchor aria-hidden=true href=#setting-up-the-domain-controller>#</a></h3><ol><li>Come to your windows server 2022 -> Add it into <code>vmnet3</code> along with <code>NAT</code> in case of internet related tasks like installations.</li><li>Boot your <code>windows server</code> -> make sure you are at this stage:
<img alt=ls_7 loading=lazy src=/images/Pentesting/NP/lab/ls_7.png></li><li>Click on <code>next</code> -> <code>Install Now</code></li><li>You should see a page like this :
<img alt=ls_8 loading=lazy src=/images/Pentesting/NP/lab/ls_8.png></li><li>Click on <code>windows server 2022 standard evaluation(Desktop Experience)</code> -> then hit next</li><li>Check the box -> hit <code>next</code></li><li>Once you are at this page:
<img alt=ls_9 loading=lazy src=/images/Pentesting/NP/lab/ls_9.png></li><li>Click on <code>custom install</code></li><li>Then on this page hit <code>New</code> -> <code>Apply</code>
<img alt=ls_10 loading=lazy src=/images/Pentesting/NP/lab/ls_10.png></li><li>Hit <code>ok</code> on the warning</li><li>Click <code>next</code> again on this page:
<img alt=ls_11 loading=lazy src=/images/Pentesting/NP/lab/ls_11.png></li><li>Now let it install.</li><li>After that you will come to this page:
<img alt=ls_12 loading=lazy src=/images/Pentesting/NP/lab/ls_12.png></li><li>Give the password <code>P@$$w0rd!</code></li><li>Now login using the creds.</li><li>Install <code>vmware tools</code> -> click <code>vm</code> -> Install vmware tools -> open <code>cmd</code> -> run the command <code>D:\setup.exe</code> -> After installing a <code>complete</code> vmware tools using the popped up wizard -> restart</li><li>Now we need to rename our windows server -> press on the <code>windows</code> button -> type <code>name</code> -> Then click on this option:
<img alt=ls_13 loading=lazy src=/images/Pentesting/NP/lab/ls_13.png></li><li>After that click on <code>Rename PC</code>
<img alt=ls_14 loading=lazy src=/images/Pentesting/NP/lab/ls_14.png></li><li>We will be building this Lab as a <code>MARVEL</code> theme, so i gave the name <code>HYDRA-DC</code> -> then restart again.
<img alt=ls_15 loading=lazy src=/images/Pentesting/NP/lab/ls_15.png></li><li>Login again</li><li>Now we will actually start setting our <code>windows server</code> as Domain controller.</li><li>Onto <code>server manager</code> -> Click on the <code>Manage</code> button -> Click <code>Add roles and features</code>
<img alt=ls_16 loading=lazy src=/images/Pentesting/NP/lab/ls_16.png></li><li>A wizard will pop up, click 3 times next. On selection of <code>Server Roles</code> , select <code>Active Directory Domain Services</code> . This will allow us to have our domain.
<img alt=ls_17 loading=lazy src=/images/Pentesting/NP/lab/ls_17.png></li><li>Hit <code>Add features</code> on the next pop up. Then click <code>3 times next again</code> on the options given.</li><li>After coming to this page Check this option:
<img alt=ls_18 loading=lazy src=/images/Pentesting/NP/lab/ls_18.png></li><li>Then hit <code>install</code> .</li><li>After installation click on this option:
<img alt=ls_19 loading=lazy src=/images/Pentesting/NP/lab/ls_19.png></li><li>A new wizard will pop up, click on these options, and give this domain name{you can give your unique domain name, but make sure you have added <code>.local</code> at the end of the name}:
<img alt=ls_20 loading=lazy src=/images/Pentesting/NP/lab/ls_20.png></li><li>Hit <code>next</code> -> Give the same <code>admin password</code> into this page also:
<img alt=ls_21 loading=lazy src=/images/Pentesting/NP/lab/ls_21.png></li><li>Hit <code>next</code> 2 times including the previous step.</li><li>Populated the <code>NetBIOS</code> domain name successfully:
<img alt=ls_22 loading=lazy src=/images/Pentesting/NP/lab/ls_22.png></li><li>Hit <code>next</code> again.</li><li>Our pathways:
<img alt=ls_23 loading=lazy src=/images/Pentesting/NP/lab/ls_23.png></li></ol><p><em>What is SYSVOL:</em> SYSVOL is a <code>shared folder on each domain controller (DC) in a Windows Server Active Directory (AD) domain that stores critical files for common access and replication across the domain</code>. It contains a copy of Group Policy Objects (GPOs) and scripts, such as logon and startup scripts, which are essential for applying policies to member computers</p><p><em>What is NTDS:</em> NTDS, or <strong>NT Directory Services</strong>, is the underlying technology and database that powers Microsoft&rsquo;s Active Directory (AD). It is responsible for storing and managing all the information about network resources, such as user accounts, computer objects, groups, and security identifiers (SIDs).
The physical database file is named <strong><code>ntds.dit</code></strong> (Directory Information Tree) and is stored by default in the <code>%SystemRoot%\NTDS</code> folder on every domain controller.</p><ol start=34><li>Hit <code>next</code> again 2 times including this pathways page.</li><li>You should see a <code>prerequisite</code> check running, and after some time it should say <code>successful</code> -> then hit <code>install</code>
<img alt=ls_24 loading=lazy src=/images/Pentesting/NP/lab/ls_24.png></li><li>Then on installation it should give a pop up like this -> click <code>close</code>
<img alt=ls_25 loading=lazy src=/images/Pentesting/NP/lab/ls_25.png></li><li>You <code>DC</code> will be automatically restarted and bring you to the login screen.</li><li>Login . We will now install another feature called <code>ADCS(active direcotry Certificate Services)</code> , this allows us to use <code>LDAPS</code> on our DC , and manages certificates for authentication purposes.</li><li>Again on <code>server manager</code> -> click <code>manage</code> -> <code>add roles and features</code> -> 3 times next -> Select ADCS -> add features -> 4 times next -> Check the restart box -> hit install</li><li>Then after installation -> click on this option:
<img alt=ls_26 loading=lazy src=/images/Pentesting/NP/lab/ls_26.png></li><li>Hit <code>next</code> on the first option. Check the box of <code>Certificate auhority</code> and hit <code>next</code>
<img alt=ls_27 loading=lazy src=/images/Pentesting/NP/lab/ls_27.png></li><li>Hit 5 times next again -> change the validity option to 99 years
<img alt=ls_28 loading=lazy src=/images/Pentesting/NP/lab/ls_28.png></li><li>Hit <code>next</code> and come to this page then click <code>configure</code>
<img alt=ls_29 loading=lazy src=/images/Pentesting/NP/lab/ls_29.png></li><li>Restart again after the completion.</li></ol><hr><h3 id=setting-up-the-windows-10-machines>Setting up the windows 10 machines:<a hidden class=anchor aria-hidden=true href=#setting-up-the-windows-10-machines>#</a></h3><ol><li>Boot up both the windows 10 machine now, i removed previous machines containing <code>windows 10 enterprise iso</code> .This time i am having normal <code>windows 10 iso</code> , so we will be using <code>windows 10 education</code> . Remember while adding the vm you gave username and password , in my case then only the following pages came up.</li><li>Then setup the basic requirements on both the machines
<img alt=ls_30 loading=lazy src=/images/Pentesting/NP/lab/ls_30.png></li><li>Use the option <code>domain joined instead</code> , rather than using online accounts.
<img alt=ls_31 loading=lazy src=/images/Pentesting/NP/lab/ls_31.png></li></ol><p><img alt=ls_32 loading=lazy src=/images/Pentesting/NP/lab/ls_32.png>
4. Name <code>THEPUNISHER</code> vm&rsquo;s user as <code>frankcastle</code> with password <code>Password1</code> , and <code>SPIDERMAN</code> vm&rsquo;s user as <code>peterparker</code> with password <code>Password1</code> ``
<img alt=ls_33 loading=lazy src=/images/Pentesting/NP/lab/ls_33.png>
5. Select the security questions and answer them as <code>bob</code> for every single one of them in both the machines.
<img alt=ls_34 loading=lazy src=/images/Pentesting/NP/lab/ls_34.png>
6. Turn off all the privacy settings, we don&rsquo;t want to send any data to <code>Microsoft</code>
<img alt=ls_35 loading=lazy src=/images/Pentesting/NP/lab/ls_35.png>
7. Don&rsquo;t accept crotana
<img alt=ls_36 loading=lazy src=/images/Pentesting/NP/lab/ls_36.png>
8. After doing the complete setup , it will automatically boot up the machines, then rename these two machines as <code>THEPUNISHER</code>, <code>SPIDERMAN</code> respectively . Then restart again.
<img alt=ls_37 loading=lazy src=/images/Pentesting/NP/lab/ls_37.png></p><hr><h3 id=setting-up-gpogroups-policies-and-users>Setting up GPO(Groups, Policies and Users):<a hidden class=anchor aria-hidden=true href=#setting-up-gpogroups-policies-and-users>#</a></h3><ol><li><p>Open up the <code>Domain controller</code></p></li><li><p>On <code>server manager</code> -> Click on <code>tools</code> -> <code>Active Directory users and computers</code></p></li><li><p>This page should load up:
<img alt=ls_38 loading=lazy src=/images/Pentesting/NP/lab/ls_38.png></p></li><li><p>Separating the groups from users:
<img alt=ls_39 loading=lazy src=/images/Pentesting/NP/lab/ls_39.png></p></li><li><p>Give the name as <code>Groups</code></p></li><li><p>Grab all the groups from the <code>users</code> tab and move them to <code>Groups</code> except <code>Administrator and Guest</code> user.
<img alt=ls_40 loading=lazy src=/images/Pentesting/NP/lab/ls_40.png></p></li><li><p><strong>Making Domain admin</strong>:</p><ol><li>Right click on the <code>Administrator</code> user -> Copy -> Fill the following information
<img alt=ls_41 loading=lazy src=/images/Pentesting/NP/lab/ls_41.png></li><li>Give the password as : <code>Password12345!</code>
<img alt=ls_42 loading=lazy src=/images/Pentesting/NP/lab/ls_42.png></li><li>Click <code>next</code> and hit <code>finish</code></li></ol></li><li><p>Making a service account which will be our another <code>Domain admin</code> :</p><ol><li>Again copy from the <code>Administrator</code> account and use the following info:
<img alt=ls_43 loading=lazy src=/images/Pentesting/NP/lab/ls_43.png></li><li>Give the password as <code>MYpassword123#</code></li><li>Then do this step:
<img alt=ls_44 loading=lazy src=/images/Pentesting/NP/lab/ls_44.png></li></ol></li><li><p>Making some low level users which will part of our <code>Domain users</code> group:</p><ol><li>Use the following steps to open the wizard:
<img alt=ls_45 loading=lazy src=/images/Pentesting/NP/lab/ls_45.png></li><li>Add the <code>frank castle</code> user:
<img alt=ls_46 loading=lazy src=/images/Pentesting/NP/lab/ls_46.png></li><li>Use the following checkboxes, and give the same password of <code>frankcastle</code> which is <code>Password1</code>
<img alt=ls_47 loading=lazy src=/images/Pentesting/NP/lab/ls_47.png></li><li>Add <code>peterparker</code> using the following steps:
<img alt=ls_48 loading=lazy src=/images/Pentesting/NP/lab/ls_48.png></li><li>We will give here his password as <code>Password2</code></li></ol></li><li><p>All users:
<img alt=ls_49 loading=lazy src=/images/Pentesting/NP/lab/ls_49.png></p></li><li><p><strong>SETTING UP FILESHARE:</strong></p><ol><li>Come to <code>server manager</code> -> Click on <code>Files and storage services</code>
<img alt=ls_50 loading=lazy src=/images/Pentesting/NP/lab/ls_50.png></li><li>Click on <code>Shares</code> -> <code>Tasks</code> -> <code>New share</code> -> <code>SMB share quick</code> -> click next -> Click next again -> give the share name as <code>hackme</code> -> click 2 times next -> hit <code>create</code><br><img alt=ls_51 loading=lazy src=/images/Pentesting/NP/lab/ls_51.png>
<img alt=ls_52 loading=lazy src=/images/Pentesting/NP/lab/ls_52.png></li></ol></li><li><p><strong>Setting up the service account(SQL Service):</strong></p><ol><li>Open <code>command prompt</code> as <code>administrator</code></li><li>use the following command:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>setspn</span> <span class=n>-a</span> <span class=nb>HYDRA-DC</span><span class=p>/</span><span class=n>SQLService</span><span class=p>.</span><span class=py>MARVEL</span><span class=p>.</span><span class=n>local</span><span class=err>:</span><span class=mf>60111</span> <span class=n>MARVEL</span><span class=p>\</span><span class=n>SQLService</span>
</span></span></code></pre></div><p><img alt=ls_53 loading=lazy src=/images/Pentesting/NP/lab/ls_53.png>
3. Verifying the changes using the following command by querying:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>setspn</span> <span class=n>-T</span> <span class=n>MARVEL</span><span class=p>.</span><span class=py>local</span> <span class=n>-Q</span> <span class=p>*/*</span>
</span></span></code></pre></div><ol start=4><li>At the end of the command&rsquo;s output we should see this result:
<img alt=ls_54 loading=lazy src=/images/Pentesting/NP/lab/ls_54.png></li></ol></li><li><p><strong>Setting up a group policy:</strong></p><ol><li>On the start menu type <code>group</code>
<img alt=ls_55 loading=lazy src=/images/Pentesting/NP/lab/ls_55.png></li><li>Use the following options to create a new GPO:
<img alt=ls_56 loading=lazy src=/images/Pentesting/NP/lab/ls_56.png></li><li>Give this name:
<img alt=ls_57 loading=lazy src=/images/Pentesting/NP/lab/ls_57.png></li><li>Our motive is to disable the <code>windows defender accross the whole domain</code> , as we are not going to perform any modern <code>defender evasion</code> techniques.</li><li>Use the following steps for editing the <code>GPO</code>:
<img alt=ls_58 loading=lazy src=/images/Pentesting/NP/lab/ls_58.png></li><li>Come to this column:
<img alt=ls_59 loading=lazy src=/images/Pentesting/NP/lab/ls_59.png></li><li>Find <code>Microsoft Defender Antivirus</code> -> and double click on this <code>turn off</code> option:
<img alt=ls_60 loading=lazy src=/images/Pentesting/NP/lab/ls_60.png></li><li>A wizard should pop up -> click on <code>enabled</code> -> <code>apply</code> -> click <code>ok</code>
<img alt=ls_61 loading=lazy src=/images/Pentesting/NP/lab/ls_61.png></li><li>Then again come back to the <code>GPO management tab</code> -> <code>right click</code> -> click <code>enforced</code></li></ol></li><li><p>Then give the DC a static IP from the adapter settings, used <code>linux mint</code> as the DNS server:
<img alt=ls_62 loading=lazy src=/images/Pentesting/NP/lab/ls_62.png>
<img alt=ls_63 loading=lazy src=/images/Pentesting/NP/lab/ls_63.png>
<em>I have used linux mint as the gateway, if you are not using any intermediate os for acting as a router, don&rsquo;t give any gateway(as no default gateway exists inside vmnet&rsquo;s host only networks, in case if you are using the network segmentation). If you are using the <code>NAT</code> only setup give your <code>NAT's</code> default gateway. You can identify your <code>NAT's</code> default gateway through <code>Virtual Network Editor -> Change settings -> select the NAT network -> NAT settings</code>.</em></p></li></ol><hr><div class="admonition note"><div class=admonition-header><svg viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7.0 64 0H224v128c0 17.7 14.3 32 32 32h128v125.7l-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3.0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9.0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6.0zM311.9 417 441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
<span>Note</span></div><div class=admonition-content><p>Don&rsquo;t get fooled by my lab result&rsquo;s IP addresses. Your lab will be having different setup of IPs as well as NICs. Understand those carefully and then add accordingly throughout the lab setup as well as on practical demos.</p></div></div><h3 id=setting-up-linux-mint-as-an-intermediate-routeroptional>Setting up Linux mint as an intermediate router(optional):<a hidden class=anchor aria-hidden=true href=#setting-up-linux-mint-as-an-intermediate-routeroptional>#</a></h3><p><strong>For the advance lab setup</strong></p><ol><li><p>Set up static IP for both <code>wired connection 2 and 3</code> in linux mint:
<img alt=ls_64 loading=lazy src=/images/Pentesting/NP/lab/ls_64.png>
<img alt=ls_65 loading=lazy src=/images/Pentesting/NP/lab/ls_65.png></p></li><li><p><strong>ENABLING IP FORWARDING</strong>:</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Turn on forwarding immediately</span>
</span></span><span class=line><span class=cl>sudo sysctl -w net.ipv4.ip_forward<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Make it permanent (so it survives a reboot)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;net.ipv4.ip_forward=1&#34;</span> <span class=p>|</span> sudo tee -a /etc/sysctl.conf
</span></span></code></pre></div><p><img alt=ls_66 loading=lazy src=/images/Pentesting/NP/lab/ls_66.png></p><ol start=3><li><strong>FIXING THE FIREWALL BY ALLOWING ROUTING</strong>:</li></ol><ul><li><strong>Allow traffic from vmnet2 to go to vmnet3:</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw route allow in on ens34 out on ens35
</span></span></code></pre></div><ul><li><strong>Allow traffic from vmnet3 to go to vmnet2:</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>    sudo ufw route allow in on ens35 out on ens34
</span></span></code></pre></div><p><img alt=ls_67 loading=lazy src=/images/Pentesting/NP/lab/ls_67.png></p><hr><h3 id=joining-the-machines-to-the-domain-controller>Joining the Machines to the Domain controller:<a hidden class=anchor aria-hidden=true href=#joining-the-machines-to-the-domain-controller>#</a></h3><ol><li>Pointing those machines to our <code>Domain controller</code>:<ol><li>If you have followed the <code>linux mint</code> one this one is for you:<ol><li>Our motive is to point <code>SPIDERMAN</code> to route it&rsquo;s traffic to <code>linux mint</code> to <code>Domain controller</code> and vise versa.</li><li>To do so use the following settings in your <code>vmnet 2</code> adapter on <code>SPIDERMAN</code>:
<img alt=ls_68 loading=lazy src=/images/Pentesting/NP/lab/ls_68.png></li><li>Onto <code>THEPUNISHER</code> machine use the following settings for <code>vmnet 2</code>:
<img alt=ls_69 loading=lazy src=/images/Pentesting/NP/lab/ls_69.png></li><li>Settings for <code>vmnet 3</code> on <code>THEPUNISHER</code> machine:
<img alt=ls_70 loading=lazy src=/images/Pentesting/NP/lab/ls_70.png></li></ol></li><li>If you are doing the <code>NAT</code> only setup:<ol><li>Give the default gateway of your <code>NAT</code> network for both of the machine.</li><li>Give the <code>Domain controller's</code> IP as <code>DNS</code> for both the machine.</li></ol></li></ol></li><li>Testing the connections:<ol><li>Ping <code>SPIDERMAN</code> to <code>Linux mint</code> , then <code>SPIDERMAN</code> to <code>THEPUNISHER</code></li><li>Ping <code>THEPUNISHER</code> to <code>linu mint</code> and then to <code>SPIDERMAN</code></li><li>Ping <code>Domain controller</code> from <code>Spiderman</code> and <code>THEPUNISHER</code> machine both and vise versa.</li><li>If you face <code>request timeout</code> issue, turn off <code>windows firewall fully</code> on both the <code>PUNISHER and SPIDERMAN</code> machine. Then try again.</li></ol></li><li><strong>Joining the domain from THEPUNISHER machine:</strong><ol><li>Click on the start button -> type <code>Domain</code> and access this option:
<img alt=ls_71 loading=lazy src=/images/Pentesting/NP/lab/ls_71.png></li><li>Click on <code>connect</code> -> and click on <code>join this device to a local AD domain</code>
<img alt=ls_72 loading=lazy src=/images/Pentesting/NP/lab/ls_72.png></li><li>Give your local domain name and hit next:
<img alt=ls_73 loading=lazy src=/images/Pentesting/NP/lab/ls_73.png></li><li>If this windows loads up that&rsquo;s mean your lab setup is successful:
<img alt=ls_74 loading=lazy src=/images/Pentesting/NP/lab/ls_74.png></li><li>Give username as <code>administrator</code> and password as <code>P@$$w0rd!</code>
<img alt=ls_75 loading=lazy src=/images/Pentesting/NP/lab/ls_75.png></li><li>Then on this pop up, select account type as <code>Administrator</code>
<img alt=ls_76 loading=lazy src=/images/Pentesting/NP/lab/ls_76.png></li></ol></li><li><strong>Joining domain for SPIDERMAN machine:</strong><ol><li>Do the exact same stuff we did for <code>THEPUNISHER</code> machine.</li></ol></li><li>Let those machines reboot, come to the <code>DC</code> -> <code>server manager</code> -> <code>Active Directory users and computers</code> -> Under your local domain -> select <code>Computers</code> . You should see your two Windows 10 workstations
<img alt=ls_77 loading=lazy src=/images/Pentesting/NP/lab/ls_77.png></li><li>Now login onto both the workstations as <code>MARVEL\administrator</code> using the <code>DC's</code> admin password which is <code>P@$$w0rd!</code></li><li><strong>Now adding local admins inside THEPUNISHER machine:</strong><ol><li>click on the start button -> type <code>users</code> and go to the settings <code>Edit local groups and users</code>:
<img alt=ls_78 loading=lazy src=/images/Pentesting/NP/lab/ls_78.png></li><li>or you can press <code>win + r</code> and type <code>lusrmgr.msc</code></li><li>Come to the <code>users</code> tab -> right click on <code>Administrator</code> -> then set a password -> give this password <code>Password1!</code></li><li>Enable this account by double clicking it -> and disabling the checkbox telling <code>Account is disabled</code>
<img alt=ls_79 loading=lazy src=/images/Pentesting/NP/lab/ls_79.png></li><li>Adding <code>fcastle</code> which we made inside the <code>DC</code> inside <code>THEPUNISHER</code> machine&rsquo;s <code>Administrator</code> groups:
<img alt=ls_80 loading=lazy src=/images/Pentesting/NP/lab/ls_80.png></li><li>Click on <code>Add</code> -> type <code>fcastle</code> -> click on <code>check names</code> and this should appear:
<img alt=ls_81 loading=lazy src=/images/Pentesting/NP/lab/ls_81.png></li><li>Hit apply and ok</li><li>Then enable <code>Network discovery</code> by going into the <code>network folder</code>
<img alt=ls_82 loading=lazy src=/images/Pentesting/NP/lab/ls_82.png></li></ol></li><li><strong>Adding local admins inside SPIDERMAN machine:</strong><ol><li>Do the same steps as <code>THEPUNISHER's</code> step number 4</li><li>Then add 2 accounts into the <code>administrators</code> group using the following steps:</li><li>Write <code>pparker</code> and click check names
<img alt=ls_83 loading=lazy src=/images/Pentesting/NP/lab/ls_83.png>
<img alt=ls_84 loading=lazy src=/images/Pentesting/NP/lab/ls_84.png></li><li>add <code>fcastle</code> the same way we did it inside <code>THEPUNISHER</code></li><li>Now <code>peterparker</code> and <code>frankcastle</code> both as <code>local admins</code> inside <code>SPIDERMAN</code> machine</li><li>Enable network sharing by clicking the option <code>click to change</code> -> <code>turn on network discovery and file sharing</code>
<img alt=ls_85 loading=lazy src=/images/Pentesting/NP/lab/ls_85.png></li><li>Restart your computer and login as peterparker like this:
<img alt=ls_86 loading=lazy src=/images/Pentesting/NP/lab/ls_86.png></li><li><strong>Now we will map the network drive</strong></li><li>Follow these steps:
<img alt=ls_87 loading=lazy src=/images/Pentesting/NP/lab/ls_87.png></li><li>Type <code>\\HYDRA-DC\hackme</code> and check both the boxes:
<img alt=ls_88 loading=lazy src=/images/Pentesting/NP/lab/ls_88.png></li><li>Use the domain admin credentials <code>administrator and P@$$w0rd!</code>
<img alt=ls_89 loading=lazy src=/images/Pentesting/NP/lab/ls_89.png></li><li>Now we should access the shared drive:
<img alt=ls_90 loading=lazy src=/images/Pentesting/NP/lab/ls_90.png></li></ol></li></ol><hr><p><em>CONGRATS WE HAVE COMPLETED THE LAB SETUP !! Let&rsquo;s start hacking.</em></p></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on x" href="https://x.com/intent/tweet/?text=Easy%20home%20lab%20setup%20guide&amp;url=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f&amp;title=Easy%20home%20lab%20setup%20guide&amp;summary=Easy%20home%20lab%20setup%20guide&amp;source=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on reddit" href="https://reddit.com/submit?url=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f&title=Easy%20home%20lab%20setup%20guide"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on whatsapp" href="https://api.whatsapp.com/send?text=Easy%20home%20lab%20setup%20guide%20-%20https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on telegram" href="https://telegram.me/share/url?text=Easy%20home%20lab%20setup%20guide&amp;url=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Easy home lab setup guide on ycombinator" href="https://news.ycombinator.com/submitlink?t=Easy%20home%20lab%20setup%20guide&u=https%3a%2f%2f0x-s0M3n4th.github.io%2fnotes%2fpen-testing-notes%2fnetwork-pentesting%2f01-lab-build%2f01-easy-to-setup-lab%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=0x-s0M3n4th/0x-s0M3n4th.github.io data-repo-id=R_kgDOPV2wYg data-category=General data-category-id=DIC_kwDOPV2wYs4C1aSa data-mapping=url data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2026 <a href=https://0x-s0M3n4th.github.io/>0x-s0M3n4th's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>